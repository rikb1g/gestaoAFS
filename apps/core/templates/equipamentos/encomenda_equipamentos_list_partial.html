{% load static %}





<div class="container-atletas">

    <div class="header d-flex mb-3">
        <div class="me-auto p-2">
            <h1 class="titulo">Encomendas equipamento</h1>
        </div>
        <div class="p-2">
            <select name="atletas" id="atletasSelect" onchange="atletaSelectEncomendas()">
            <option value="todosAtletas" disabled selected>Selecione um atleta</option>
            <option value="todos">Selecionar todos</option>
            {% for atleta in atletas %}
            <option value='{{atleta.id}}'>{{ atleta.nome }}</option>
            {% endfor %}
        </select>

        <select name="estadoEncomenda" id="estadoEncomendaSelect" onchange="atletaSelectEncomendas()">
            <option value="todos" disabled selected>Selecione um estado</option>
            <option value="entregue">Entregue</option>
            <option value="pendente">Pendente</option>
            <option value="todos">Selecionar todos</option>
        </select>
        </div>
        <div class="p-2">
            <a href="{% url 'equipamentos:create_encomenda_equipamentos' %}" class="btn-add link-ajax"><span
                class="material-symbols-outlined btn-operacoes">add</span>Nova Encomenda</a>
        </div>
        
        
        
    </div>

    <div class="table-responsive">
        <div class="table-container">
            <table class="table-encomendas">
                <thead>
                    <tr>
                        <th><input type="checkbox" type="checkbox" class="form-check-input selectEncomendaAll"
                                id='selectall'></th>
                        <th>Nome</th>
                        <th>Artigo</th>
                        <th>Tamanho</th>
                        <th>Data Encomenda</th>
                        <th>Entregue</th>
                        <th>Operações</th>
                    </tr>
                </thead>

                <tbody>


                    {% for encomenda in encomenda_equipamentos %}
                    <tr>
                        <td>
                            <input type="checkbox" class="form-check-input selectEncomenda" value="{{ encomenda.id }}">

                        </td>
                        <td>
                            <a class="nomeAtleta" href="#">{{ encomenda.encomenda.atleta }}</a>
                        </td>
                        <td>
                            {{ encomenda.equipamento }}
                        </td>
                        <td>
                            {{ encomenda.encomenda.tamanho }}
                        </td>
                        <td>
                            {{ encomenda.encomenda.data_pedido }}
                        </td>
                        <td>
                            <input onchange="alterarEstadoEncomenda('{{ encomenda.id }}')" type="checkbox"
                                class="form-check-input estadoEncomenda" {% if encomenda.entregue %}checked{% endif %}>

                        </td>
                        <td class="linha">
                            <a href="{% url 'equipamentos:encomendas_uptade' encomenda.id %}"
                                 hx-swap="outerHTML" hx-push-url="true" class="link-ajax"><span
                                    class="material-symbols-outlined btn-operacoes">edit</span></a>
                            <a href="#" class="link-ajax"
                                onclick="deleteEncomenda('{{ encomenda.id }}','{{ encomenda.encomenda.atleta }}','{{ encomenda.equipamento }}')"><span
                                    class="material-symbols-outlined btn-operacoes link-ajax">delete</span></a>
                        </td>

                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>
    </div>
</div>

<div class="header">
    <div class="me-auto">
        <a href="#" class="btn-add pdf-encomendas">
        <span class="material-symbols-outlined">print</span>
        Gerar PDF de Encomendas</a>
    </div>

</div>

<script>

    $(function () {
        $(".selectEncomendaAll").click(function () {
            if ($(this).is(":checked")) {
                console.log("checked");
                $('.selectEncomenda').prop('checked', true);
            } else {
                $('.selectEncomenda').prop('checked', false);
            }
        })
    })


</script>